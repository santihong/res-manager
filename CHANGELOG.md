# æ›´æ–°æ—¥å¿—

## [2.0.0] - 2024-02-13

### âœ¨ é‡å¤§æ›´æ–°ï¼šNetworkç›‘å¬æ¨¡å¼

#### æ–°å¢åŠŸèƒ½

##### Networkç›‘å¬æ¨¡å¼
- ğŸ¯ å®æ—¶æ•è·Chrome Networké¢æ¿ä¸­çš„æ‰€æœ‰å›¾ç‰‡è¯·æ±‚
- ğŸ“ æ˜¾ç¤ºå›¾ç‰‡å®é™…å°ºå¯¸ï¼ˆå®½Ã—é«˜ï¼Œå¦‚ï¼š1920Ã—1080ï¼‰
- ğŸ“¦ æ˜¾ç¤ºæ–‡ä»¶å¤§å°ä¿¡æ¯ï¼ˆä»HTTPå“åº”å¤´è·å–ï¼‰
- ğŸ–¼ï¸ å›¾ç‰‡åˆ—è¡¨æ˜¾ç¤ºç¼©ç•¥å›¾é¢„è§ˆ
- âš¡ æ”¯æŒåŠ¨æ€åŠ è½½ã€æ‡’åŠ è½½ã€AJAXè¯·æ±‚çš„å›¾ç‰‡
- ğŸ”„ å®æ—¶æ›´æ–°æ•è·åˆ—è¡¨
- ğŸ—‘ï¸ æ”¯æŒæ¸…ç©ºæ•è·åˆ—è¡¨
- â¸ï¸ æ”¯æŒå¼€å§‹/åœæ­¢ç›‘å¬

##### ä¸‰æ ‡ç­¾é¡µè®¾è®¡
- ğŸ“‘ å½“å‰é¡µé¢æ¨¡å¼ï¼ˆDOMè§£æï¼‰
- ğŸŒ æŒ‡å®šURLæ¨¡å¼
- ğŸ¯ Networkç›‘å¬æ¨¡å¼ï¼ˆæ–°å¢ï¼‰

##### å›¾ç‰‡ä¿¡æ¯å±•ç¤º
- ğŸ“· ç¼©ç•¥å›¾é¢„è§ˆï¼ˆ40Ã—40pxï¼‰
- ğŸ“ å®é™…å°ºå¯¸æ˜¾ç¤ºï¼ˆå®½Ã—é«˜ï¼‰
- ğŸ“„ æ–‡ä»¶åæ˜¾ç¤º
- ğŸ·ï¸ æ ¼å¼ç±»å‹ï¼ˆJPG/PNG/GIFç­‰ï¼‰
- ğŸ“¦ æ–‡ä»¶å¤§å°ï¼ˆKB/MBï¼‰

### ğŸ¨ UI/UX æ”¹è¿›

- ä¼˜åŒ–æ ‡ç­¾é¡µåˆ‡æ¢ä½“éªŒ
- æ–°å¢Networkå›¾ç‰‡åˆ—è¡¨æ ·å¼
- å›¾ç‰‡é¡¹æ‚¬åœæ•ˆæœ
- å®æ—¶ç»Ÿè®¡æ›´æ–°
- æ›´æ¸…æ™°çš„çŠ¶æ€æç¤º

### ğŸ”§ æŠ€æœ¯å®ç°

#### æ–°å¢æ–‡ä»¶
- `network-monitor.js`ï¼šNetworkç›‘å¬å™¨ç±»
- `NETWORK-MODE.md`ï¼šNetworkæ¨¡å¼è¯¦ç»†æ–‡æ¡£

#### manifest.json æ”¹åŠ¨
- æ–°å¢ `webRequest` æƒé™
- ç‰ˆæœ¬å·æ›´æ–°è‡³ 2.0.0

#### background.js æ”¹åŠ¨
- å¯¼å…¥ `network-monitor.js`
- æ–°å¢ `startMonitoring()` å‡½æ•°
- æ–°å¢ `stopMonitoring()` å‡½æ•°
- æ–°å¢ `getCapturedImages()` æ¶ˆæ¯å¤„ç†
- æ–°å¢ `clearCapturedImages()` æ¶ˆæ¯å¤„ç†
- ä½¿ç”¨ `chrome.webRequest.onCompleted` ç›‘å¬å›¾ç‰‡è¯·æ±‚

#### popup.html æ”¹åŠ¨
- æ–°å¢ Network ç›‘å¬æ ‡ç­¾é¡µ
- æ–°å¢å›¾ç‰‡åˆ—è¡¨å®¹å™¨
- æ–°å¢ç›‘å¬æ§åˆ¶æŒ‰é’®
- æ–°å¢å›¾ç‰‡é¡¹æ ·å¼

#### popup.js æ”¹åŠ¨
- æ–°å¢ `updateNetworkImageList()` å‡½æ•°
- æ–°å¢ `getImageDimensions()` å‡½æ•°ï¼ˆè·å–å›¾ç‰‡å®é™…å°ºå¯¸ï¼‰
- æ–°å¢ `formatBytes()` å‡½æ•°ï¼ˆæ ¼å¼åŒ–æ–‡ä»¶å¤§å°ï¼‰
- æ–°å¢ç›‘å¬æ§åˆ¶é€»è¾‘
- æ–°å¢å®šæ—¶åˆ·æ–°æœºåˆ¶

### ğŸ“‹ ä½¿ç”¨åœºæ™¯

Networkç›‘å¬æ¨¡å¼ç‰¹åˆ«é€‚åˆï¼š
- ğŸ“± ç¤¾äº¤åª’ä½“å›¾ç‰‡ä¸‹è½½ï¼ˆInstagramã€Twitterç­‰ï¼‰
- ğŸ–¼ï¸ å›¾ç‰‡ç”»å»Šç½‘ç«™
- ğŸ“œ æ— é™æ»šåŠ¨é¡µé¢
- ğŸ”„ åŠ¨æ€åŠ è½½å†…å®¹
- ğŸ’¤ æ‡’åŠ è½½å›¾ç‰‡

### ğŸ†š æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§ | DOMè§£ææ¨¡å¼ | Networkç›‘å¬æ¨¡å¼ |
|------|------------|----------------|
| æ•è·èŒƒå›´ | å·²æ¸²æŸ“å›¾ç‰‡ | æ‰€æœ‰ç½‘ç»œè¯·æ±‚ |
| åŠ¨æ€åŠ è½½ | âŒ | âœ… |
| å›¾ç‰‡å°ºå¯¸ | âŒ | âœ… å®½Ã—é«˜ |
| æ–‡ä»¶å¤§å° | âŒ | âœ… |
| ä½¿ç”¨åœºæ™¯ | å¿«é€Ÿä¸‹è½½ | å…¨é¢æ•è· |

### ğŸ“ ä»£ç ç¤ºä¾‹

**è·å–å›¾ç‰‡å°ºå¯¸ï¼š**
```javascript
function getImageDimensions(url) {
    return new Promise((resolve) => {
        const img = new Image();
        img.onload = () => {
            resolve({ 
                width: img.naturalWidth, 
                height: img.naturalHeight 
            });
        };
        img.onerror = () => {
            resolve({ width: 0, height: 0 });
        };
        img.src = url;
    });
}
```

**ç›‘å¬ç½‘ç»œè¯·æ±‚ï¼š**
```javascript
chrome.webRequest.onCompleted.addListener(
    (details) => {
        // æ•è·å›¾ç‰‡è¯·æ±‚
        const imageInfo = {
            url: details.url,
            size: getContentLength(details.responseHeaders),
            statusCode: details.statusCode
        };
        capturedImages.set(url, imageInfo);
    },
    { 
        urls: ["<all_urls>"],
        types: ["image"]
    },
    ["responseHeaders"]
);
```

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **æƒé™è¦æ±‚**ï¼šéœ€è¦ `webRequest` æƒé™
2. **æ€§èƒ½å½±å“**ï¼šç›‘å¬æœ‰è½»å¾®æ€§èƒ½å¼€é”€ï¼Œä¸ç”¨æ—¶è¯·åœæ­¢
3. **éšç§ä¿æŠ¤**ï¼šä»…ç›‘å¬å½“å‰æ ‡ç­¾é¡µ
4. **å›¾ç‰‡å°ºå¯¸**ï¼šå¼‚æ­¥åŠ è½½ï¼Œå¯èƒ½æœ‰çŸ­æš‚å»¶è¿Ÿ
5. **æ–‡ä»¶å¤§å°**ï¼šä¾èµ–æœåŠ¡å™¨è¿”å› `Content-Length` å“åº”å¤´

### ğŸ”„ å‡çº§æŒ‡å—

ä» v1.1.0 å‡çº§åˆ° v2.0.0ï¼š

1. åœ¨ `chrome://extensions/` é¡µé¢æ‰¾åˆ°æœ¬æ’ä»¶
2. ç‚¹å‡»ã€Œé‡æ–°åŠ è½½ã€æŒ‰é’®
3. æ–°å¢çš„ Network ç›‘å¬åŠŸèƒ½ç«‹å³å¯ç”¨
4. åŸæœ‰åŠŸèƒ½ä¿æŒä¸å˜

### ğŸ“š æ–‡æ¡£

- [README.md](./README.md)ï¼šå®Œæ•´ä½¿ç”¨è¯´æ˜
- [NETWORK-MODE.md](./NETWORK-MODE.md)ï¼šNetworkæ¨¡å¼è¯¦ç»†æ–‡æ¡£
- [QUICKSTART.md](./QUICKSTART.md)ï¼šå¿«é€Ÿå¼€å§‹æŒ‡å—

---

## [1.1.0] - 2024

### âœ¨ æ–°å¢åŠŸèƒ½

#### æ—¶é—´æˆ³ç›®å½•ç®¡ç†
- æ¯æ¬¡ä¸‹è½½è‡ªåŠ¨åˆ›å»ºä»¥æ—¶é—´æˆ³å‘½åçš„å­ç›®å½•
- æ—¶é—´æˆ³æ ¼å¼ï¼š`YYYYMMDD_HHMMSS`ï¼ˆä¾‹å¦‚ï¼š`20240213_143025`ï¼‰
- ä¸‹è½½è·¯å¾„å˜æ›´ä¸ºï¼š`images/[æ—¶é—´æˆ³]/`

### ğŸ¯ åŠŸèƒ½ä¼˜åŠ¿

1. **ç‹¬ç«‹å­˜æ”¾**ï¼šæ¯æ¬¡ä¸‹è½½çš„å›¾ç‰‡éƒ½æœ‰ç‹¬ç«‹çš„ç›®å½•ï¼Œä¸ä¼šæ··æ·†
2. **æ—¶é—´è¿½æº¯**ï¼šé€šè¿‡ç›®å½•åå¯ä»¥æ¸…æ¥šçŸ¥é“ä¸‹è½½æ—¶é—´
3. **ä¾¿äºç®¡ç†**ï¼šæ–¹ä¾¿æŸ¥æ‰¾å’Œç®¡ç†ä¸åŒæ‰¹æ¬¡çš„å›¾ç‰‡
4. **è‡ªåŠ¨åŒ–**ï¼šæ— éœ€æ‰‹åŠ¨åˆ›å»ºç›®å½•ï¼Œå®Œå…¨è‡ªåŠ¨åŒ–

### ğŸ“ ä½¿ç”¨ç¤ºä¾‹

**ä¸‹è½½å‰çš„ç›®å½•ç»“æ„ï¼š**
```
Downloads/
â””â”€â”€ images/
```

**ç¬¬ä¸€æ¬¡ä¸‹è½½åï¼ˆ2024å¹´2æœˆ13æ—¥ 14:30:25ï¼‰ï¼š**
```
Downloads/
â””â”€â”€ images/
    â””â”€â”€ 20240213_143025/
        â”œâ”€â”€ image1.jpg
        â”œâ”€â”€ image2.png
        â””â”€â”€ image3.webp
```

**ç¬¬äºŒæ¬¡ä¸‹è½½åï¼ˆ2024å¹´2æœˆ13æ—¥ 15:45:10ï¼‰ï¼š**
```
Downloads/
â””â”€â”€ images/
    â”œâ”€â”€ 20240213_143025/
    â”‚   â”œâ”€â”€ image1.jpg
    â”‚   â”œâ”€â”€ image2.png
    â”‚   â””â”€â”€ image3.webp
    â””â”€â”€ 20240213_154510/
        â”œâ”€â”€ photo1.jpg
        â”œâ”€â”€ photo2.jpg
        â””â”€â”€ photo3.png
```

### ğŸ”§ æŠ€æœ¯å®ç°

#### popup.js æ”¹åŠ¨
- æ–°å¢ `generateTimestampFolder()` å‡½æ•°ç”Ÿæˆæ—¶é—´æˆ³
- åœ¨ä¸‹è½½å¼€å§‹æ—¶ç”Ÿæˆæ—¶é—´æˆ³å¹¶ä¼ é€’ç»™ background.js
- æ›´æ–°æˆåŠŸæç¤ºä¿¡æ¯ï¼Œæ˜¾ç¤ºå…·ä½“çš„ä¸‹è½½ç›®å½•

#### background.js æ”¹åŠ¨
- `downloadImage()` å‡½æ•°æ–°å¢ `timestamp` å‚æ•°
- æ ¹æ®æ—¶é—´æˆ³åŠ¨æ€æ„å»ºä¸‹è½½è·¯å¾„
- ä¿æŒå‘åå…¼å®¹ï¼ˆå¦‚æœæ²¡æœ‰æ—¶é—´æˆ³ï¼Œä½¿ç”¨é»˜è®¤ `images` ç›®å½•ï¼‰

### ğŸ“‹ ä»£ç å˜æ›´

**popup.js å…³é”®ä»£ç ï¼š**
```javascript
// ç”Ÿæˆæ—¶é—´æˆ³ç›®å½•å
function generateTimestampFolder() {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    const hour = String(now.getHours()).padStart(2, '0');
    const minute = String(now.getMinutes()).padStart(2, '0');
    const second = String(now.getSeconds()).padStart(2, '0');
    return `${year}${month}${day}_${hour}${minute}${second}`;
}

// ç”Ÿæˆæœ¬æ¬¡ä¸‹è½½çš„æ—¶é—´æˆ³ç›®å½•
const timestamp = generateTimestampFolder();

// ä¸‹è½½æ—¶ä¼ é€’æ—¶é—´æˆ³
await chrome.runtime.sendMessage({
    action: 'download',
    url: images[i].url,
    filename: images[i].filename,
    timestamp: timestamp
});
```

**background.js å…³é”®ä»£ç ï¼š**
```javascript
// ä¸‹è½½å›¾ç‰‡
async function downloadImage(url, filename, timestamp) {
    try {
        // ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå­ç›®å½•å
        const folder = timestamp ? `images/${timestamp}` : 'images';
        
        await chrome.downloads.download({
            url: url,
            filename: `${folder}/${filename}`,
            conflictAction: 'uniquify',
            saveAs: false
        });
    } catch (error) {
        console.error('ä¸‹è½½å¤±è´¥:', url, error);
        throw error;
    }
}
```

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ—¶é—´æˆ³ç²¾åº¦**ï¼šç²¾ç¡®åˆ°ç§’ï¼ŒåŒä¸€ç§’å†…çš„å¤šæ¬¡ä¸‹è½½ä¼šä½¿ç”¨åŒä¸€ä¸ªç›®å½•
2. **å‘åå…¼å®¹**ï¼šå¦‚æœæ²¡æœ‰ä¼ é€’æ—¶é—´æˆ³å‚æ•°ï¼Œä¼šä½¿ç”¨é»˜è®¤çš„ `images` ç›®å½•
3. **æ–‡ä»¶åå†²çª**ï¼šåŒä¸€ç›®å½•å†…çš„æ–‡ä»¶åå†²çªä»ä¼šè‡ªåŠ¨æ·»åŠ æ•°å­—åç¼€

### ğŸ”„ å‡çº§æŒ‡å—

å¦‚æœä½ å·²ç»å®‰è£…äº† v1.0.0 ç‰ˆæœ¬ï¼š

1. åœ¨ `chrome://extensions/` é¡µé¢æ‰¾åˆ°æœ¬æ’ä»¶
2. ç‚¹å‡»ã€Œé‡æ–°åŠ è½½ã€æŒ‰é’®
3. æˆ–è€…åˆ é™¤æ—§ç‰ˆæœ¬ï¼Œé‡æ–°åŠ è½½æ–°ç‰ˆæœ¬

å‡çº§åï¼Œæ–°çš„ä¸‹è½½ä¼šè‡ªåŠ¨ä½¿ç”¨æ—¶é—´æˆ³ç›®å½•ï¼Œæ—§çš„ä¸‹è½½æ–‡ä»¶ä¸å—å½±å“ã€‚

---

## [1.0.0] - 2024

### âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ

#### æ ¸å¿ƒåŠŸèƒ½
- ğŸ–¼ï¸ æ”¯æŒ JPGã€PNGã€GIFã€WebPã€SVGã€BMP ç­‰6ç§å›¾ç‰‡æ ¼å¼
- ğŸ“ æ”¯æŒæœ€å°å°ºå¯¸è¿‡æ»¤
- ğŸ¯ åŒæ¨¡å¼ä¸‹è½½ï¼šå½“å‰é¡µé¢ + æŒ‡å®šURL
- ğŸ“Š å®æ—¶ç»Ÿè®¡å’Œè¿›åº¦æ˜¾ç¤º
- ğŸ¨ ç¾è§‚çš„æ¸å˜UIè®¾è®¡

#### æ™ºèƒ½æå–
- `<img>` æ ‡ç­¾
- CSS èƒŒæ™¯å›¾ç‰‡
- `<picture>` æ ‡ç­¾
- `srcset` å±æ€§
- ç½‘ç«™å›¾æ ‡

#### æŠ€æœ¯ç‰¹æ€§
- Manifest V3
- å¼‚æ­¥å¤„ç†
- å®Œå–„çš„é”™è¯¯å¤„ç†
- æƒé™æœ€å°åŒ–
